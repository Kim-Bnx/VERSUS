{"version":3,"file":"RichTextEditorColorPickerControl.mjs","sources":["../../src/RichTextEditorControl/RichTextEditorColorPickerControl.tsx"],"sourcesContent":["import React, { forwardRef, useState } from 'react';\nimport {\n  BoxProps,\n  Popover,\n  PopoverProps,\n  ColorSwatch,\n  SimpleGrid,\n  ColorPicker,\n  Group,\n  ActionIcon,\n  Tooltip,\n  ColorPickerProps,\n  useProps,\n  ElementProps,\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { IconCircleOff, IconColorPicker, IconX, IconPalette, IconCheck } from '@tabler/icons-react';\nimport { RichTextEditorControl } from './RichTextEditorControl';\nimport { useRichTextEditorContext } from '../RichTextEditor.context';\n\nexport interface RichTextEditorColorPickerControlProps extends BoxProps, ElementProps<'button'> {\n  /** Props added to Popover component */\n  popoverProps?: Partial<PopoverProps>;\n\n  /** Props added to ColorPicker component */\n  colorPickerProps?: Partial<ColorPickerProps>;\n\n  /** List of colors that the user can choose from */\n  colors: string[];\n}\n\nconst defaultProps: Partial<RichTextEditorColorPickerControlProps> = {};\n\nexport const RichTextEditorColorPickerControl = forwardRef<\n  HTMLButtonElement,\n  RichTextEditorColorPickerControlProps\n>((props, ref) => {\n  const { popoverProps, colors, colorPickerProps, ...others } = useProps(\n    'RichTextEditorColorPickerControl',\n    defaultProps,\n    props\n  );\n\n  const { editor, labels, getStyles } = useRichTextEditorContext();\n  const [opened, { toggle, close }] = useDisclosure(false);\n  const [state, setState] = useState<'palette' | 'colorPicker'>('palette');\n  const currentColor = editor?.getAttributes('textStyle').color || 'var(--mantine-color-text)';\n\n  const handleChange = (value: string, shouldClose = true) => {\n    (editor?.chain() as any).focus().setColor(value).run();\n    shouldClose && close();\n  };\n\n  const handleClear = () => {\n    (editor?.chain() as any).focus().unsetColor().run();\n    close();\n  };\n\n  const controls = colors.map((color, index) => (\n    <ColorSwatch\n      key={index}\n      component=\"button\"\n      color={color}\n      onClick={() => handleChange(color)}\n      size={26}\n      radius=\"xs\"\n      style={{ cursor: 'pointer' }}\n      title={labels.colorPickerColorLabel(color)}\n      aria-label={labels.colorPickerColorLabel(color)}\n    />\n  ));\n\n  return (\n    <Popover opened={opened} withinPortal trapFocus onClose={close} {...popoverProps}>\n      <Popover.Target>\n        <RichTextEditorControl\n          {...others}\n          aria-label={labels.colorPickerControlLabel}\n          title={labels.colorPickerControlLabel}\n          ref={ref}\n          onClick={toggle}\n        >\n          <ColorSwatch color={currentColor} size={14} />\n        </RichTextEditorControl>\n      </Popover.Target>\n\n      <Popover.Dropdown {...getStyles('linkEditorDropdown')}>\n        {state === 'palette' && (\n          <SimpleGrid cols={7} spacing={2}>\n            {controls}\n          </SimpleGrid>\n        )}\n\n        {state === 'colorPicker' && (\n          <ColorPicker\n            defaultValue={currentColor}\n            onChange={(value) => handleChange(value, false)}\n            {...colorPickerProps}\n          />\n        )}\n\n        <Tooltip.Group closeDelay={200}>\n          <Group justify=\"flex-end\" gap=\"xs\" mt=\"sm\">\n            {state === 'palette' && (\n              <ActionIcon\n                variant=\"default\"\n                onClick={close}\n                title={labels.colorPickerCancel}\n                aria-label={labels.colorPickerCancel}\n              >\n                <IconX stroke={1.5} size=\"1rem\" />\n              </ActionIcon>\n            )}\n\n            <ActionIcon\n              variant=\"default\"\n              onClick={handleClear}\n              title={labels.colorPickerClear}\n              aria-label={labels.colorPickerClear}\n            >\n              <IconCircleOff stroke={1.5} size=\"1rem\" />\n            </ActionIcon>\n\n            {state === 'palette' ? (\n              <ActionIcon\n                variant=\"default\"\n                onClick={() => setState('colorPicker')}\n                title={labels.colorPickerColorPicker}\n                aria-label={labels.colorPickerColorPicker}\n              >\n                <IconColorPicker stroke={1.5} size=\"1rem\" />\n              </ActionIcon>\n            ) : (\n              <ActionIcon\n                variant=\"default\"\n                onClick={() => setState('palette')}\n                aria-label={labels.colorPickerPalette}\n                title={labels.colorPickerPalette}\n              >\n                <IconPalette stroke={1.5} size=\"1rem\" />\n              </ActionIcon>\n            )}\n\n            {state === 'colorPicker' && (\n              <ActionIcon\n                variant=\"default\"\n                onClick={close}\n                title={labels.colorPickerSave}\n                aria-label={labels.colorPickerSave}\n              >\n                <IconCheck stroke={1.5} size=\"1rem\" />\n              </ActionIcon>\n            )}\n          </Group>\n        </Tooltip.Group>\n      </Popover.Dropdown>\n    </Popover>\n  );\n});\n\nRichTextEditorColorPickerControl.displayName = '@mantine/tiptap/ColorPickerControl';\n"],"names":[],"mappings":"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"}